# Git hooks for development workflow
pre-commit:
  parallel: true
  commands:
    format-markdown:
      glob: '*.md'
      run: npx prettier --write {staged_files}
      stage_fixed: true

    lint-markdown:
      glob: '*.md'
      run: npx markdownlint {staged_files}

    lint-changelog:
      files: git diff --cached --name-only
      glob: 'CHANGELOG.md'
      run: |
        if [ -n "{files}" ]; then
          npx markdownlint --config .markdownlint-changelog.json {files}
          node scripts/check-changelog-format.mjs
        fi

    format-js:
      glob: '*.{js,mjs,ts,tsx,json}'
      run: npx prettier --write {staged_files}
      stage_fixed: true

    lint-js:
      glob: '*.{js,mjs,ts,tsx}'
      run: npx eslint {staged_files} --max-warnings 0

commit-msg:
  commands:
    commitlint:
      run: npx commitlint --edit $1
